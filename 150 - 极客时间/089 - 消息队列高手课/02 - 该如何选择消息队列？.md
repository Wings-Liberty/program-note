Q：各个消息队列都提供了集群，主题等功能。为什么面对不同的业务还需要对 MQ 进行选型？

A：在业务没有特定要求的情况下，主流的 Kafka，RocketMQ，RabbitMQ 用哪个都一样，因为都提供了集群主题这种基本功能。但每种 MQ 各有特点，适用于不同的场景

选 MQ 分两步

1. MQ 必须是开源的，并且具备消息不丢失，支持集群，有足够好的性能。这一条基本限定死了范围：Kafka，RocketMQ，RabbitMQ
2. 如果没有特定需求，这 3 个 MQ 哪个都行。如果有需求，下面是简单的挑选方式
	- RabbitMQ 开箱即用，大量语言都有其客户端。缺点/特点是其设计上把 MQ 视为 “管道” 而不是 “存储消息的仓库”，所以认为消息不会堆积。如果消息堆积，其性能会急剧下降。另一个缺点：性能差于两外两个，但也够打了
	- RocketMQ 国产，不管是查问题，还是查文档都是中文，超低延迟，非常适合在线业务（**用户等待**服务器计算并返回结果的场景）
	- Kafka 的大数据生态非常好，比如 flink，spring 都为 kafka 有适配，比如 flink 直接支持设置 kafka 为数据源做流计算，spring 为 Kafka 提供 starter 启动器等。总之大数据和流计算领域的软件如果支持 MQ 通常都优先支持 Kafka。缺点是其很多地方都有批量处理机制（客户端攒够一波数据再送到服务端，或服务端收到一波数据？）导致其同步延迟不好，不适合在线业务（用户等着收消息，结果 Kafka 只收到这一个用户的消息，非得等攒够一波消息或等到时间阈值后再批量发送）

#结束 