
# 数学函数

`Math` 提供了很多数学方法其目的有两点：

1. 提供方便的 API
2. 做越界检查，如果越界会报异常

- 加减乘除。这些方法包含了结果是否越界的检查（比如 `addExact`，`xxxExact`），如果你直接用运算符计算可能会导致**结果越界却没有报错**

  ```java
  int i1 = Integer.MAX_VALUE; // int 类型能表示的最大值 2147483647
  int i2 = Integer.MAX_VALUE;
  int i3 = i1 + i2;
  System.out.println(i3); // -2，因为结果越界而出现的错误
  ```

- `sqrt` 开方运算，`pow` 幂运算

- 三角函数，指数函数和反函数

- `floor` 向上取整，`ceil` 向下取整，`round` 取最近的整数值，`abs` 取绝对值，`incrementExact` 自增，`decrementExact` 自减

- `floorMod`将第一个参数化为正数后用第二个参数进行取余


# 基本数据类型的运算和转型

整数被 0 除将会产生一个异常， 而浮点数被 0 除将会得到无穷大或 **NaN** 结果

实线：能安全转换；虚线：可能有精度丢失的转换

![[../../020 - 附件文件夹/Pasted image 20230327001352.png|500]]

- 如果两个操作数中有一个是 double 类型，另一个操作数就会被转换为 double 类型
- 否则，如果其中一个操作数是 float 类型，另一个操作数将会转换位 float 类型
- 否则，如果其中一个操作数是 long 类型，另一个操作数将会转换为 long 类型
- 否则，两个操作数都将被转换为 int 类型


ps：char转换类型的顺序是  char — int — long — float — double — Character（char的包装类） — Serializable（Character实现的接口）— Object —char的可变数组 #有待了解 


# 运算符

如果运算符得到一个值， 其类型与左侧操作数的类型不同， 就会发生强制类型转

换。 例如，如果 X 是一个 int, 则以下语句

`x += 3.5;`

是合法的， 将把 x 设置为`(int)(x + 3.5)`


**自增自减运算符**

自增自减不是原子操作


## 赋值运算符

`i = ( j = 5 )`

`j = 5` 的返回值是5，所以 i 的值会被赋为 5


## 位运算符

```
& 按位与 双目运算符 相同位均为1，结果为1；否则为0
	00000000 00000000 00000000 00000101
&	11111111 11111111 11111111 11111100
---------------------------------------
	00000000 00000000 00000000 00000101
```


```
| 按位或 双目运算符 相同位有一个为1，结果为1；都是0，结果是0
	00000000 00000000 00000000 00000101
|	11111111 11111111 11111111 11111100
---------------------------------------
	11111111 11111111 11111111 11111101
```


```
~ 按位取反 单目运算符 1变0，0变1
~	0000000 00000000 00000000 00000101
--------------------------------------
	1111111 11111111 11111111 11111010
```


```
^ 按位异或 双目运算符 相同位值不同，结果为1；否则为0
	00000000 00000000 00000000 00000101
^	11111111 11111111 11111111 11111100
---------------------------------------
	11111111 11111111 11111111 11111001
```


```
补充：
1. 异或运算满足交换律和结合律
如果：a^b=c
那么：a=b^c，b=a^c
2. 0和 0或1的异或结果都是0，所以0和任何数n 异或的结果都是 n
3. 布尔值之间也可以进行上述 4 种位运算，返回值也是布尔值。在位运算时逻辑上 true=1，false=0
```


假设	
- `A = 0011 1100`
- `B = 0000 1101`

```
<< 左移 双目运算符 二进制向左移动指定个数，右边补0
A << 2
res: 1111 0000
```


```
>> y右移 双目运算符 二进制向右移动指定个数。高位是0，左边就补0；高位是1，左边就补1
A >> 2
res: 0000 1111
```


```
>>> 无符号右移 双目运算符 二进制向右移动指定个数。左边补0
A >>> 2
res: 0000 1111
```


**运算符结合性**

！＋（正）－（负）~　++　--

=   +=   -=    *=   /=    %=    &=    |=   ^=    ~=   <<=    >>=    >>>=

都是从右向左结合


# 流程控制语句


**变量作用域**

代码块中不能声明代码块外已经声明过的变量。for 循环中也不行

```java
public static void main(String[] args) {
    int a = 3;
    {
        int a = 6; // Variable 'a' is already defined in the scope。这会导致程序无法运行
    }
}
```


## switch

```java
switch(expression){
    case value1 :
       //语句
       break; //可选
    case value2 :
       //语句
       break; //可选
    //你可以有任意数量的case语句
    default : //可选
       //语句
}
```

- switch 语句中的变量类型可以是： `int`， `byte`、`short` 和 `char`
  - 编译器内部对 `byte`、`short` 和 `char` 类型的变量的字节码指令集操作用的都是对 `int` 类型的指令，所以`switch` 同样支持 `byte`、`short` 和 `char`
  - 从 `Java SE 7` 开始，`switch `支持字符串 `String` 类型了，同时 `case` 标签必须为字符串常量或字面量。
  - 支持 `String` 类型是因为，在编译时将 `case` 中的字符串常量或字面值都替换为了哈希值，这样对 `String` 的选择就变成了对 `int` 的选择
- `case` 语句中的值的数据类型必须与变量的数据类型相同，而且只能是常量或者字面常量，不能是变量

> 实质上 switch 只能用 int 作为 expression，int 是 4 个字节的数据，所以可以兼容 byte，short 和 char。字符串和枚举类本质上也可以用一个 int 表示，所以 switch 也支持这两个类型

## 中断控制流程

`Java` 不推荐用 `goto`，除了`goto` 外

标签 + `break` 能实现安全跳出多重循环


```java
lable1:
while(true){
    while(true){
        if(condition){
            // 执行跳转到lable1标签的语句块的末尾
            break lable1;
        }
    }
}
```

`continue` 也能用标签


## 输入输出简介

>  标准输入输出流指的是控制台窗口中的输入输出


普通的输入输出

```java
// 输出
System.out.println
// 输入
Scanner in = new Scanner(System.in);
```

格式化输出是 `System.out.printf`

格式化输出中，占位符由 `% + 标志 + 转换符` 组成

下图是格式化输出中，占位符中各种转换符和标志的含义

![[../../020 - 附件文件夹/Pasted image 20230327001418.png|625]]

![[../../020 - 附件文件夹/Pasted image 20230327001426.png|625]]